!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="163e6472-bbd6-48a0-8913-71c21bd790e5",e._sentryDebugIdIdentifier="sentry-dbid-163e6472-bbd6-48a0-8913-71c21bd790e5")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[398,8426],{8848:(e,t,a)=>{var s=a(35902),r=a(80544),n=Math.max;e.exports=function(e,t,a){var l=null==e?0:e.length;if(!l)return -1;var i=null==a?0:r(a);return i<0&&(i=n(l+i,0)),s(e,t,i)}},9359:(e,t,a)=>{"use strict";a.d(t,{YX:()=>d,_4:()=>c,gI:()=>o,ge:()=>i,lB:()=>l});var s=a(80263),r=a(53239),n=a(51859);let l=e=>{let{children:t,header:a,footer:r}=e;return(0,s.jsxs)(i,{"data-sentry-element":"FormPanelContainer","data-sentry-component":"FormPanel","data-sentry-source-file":"FormPanel.tsx",children:[a&&(0,s.jsx)(o,{children:a}),(0,s.jsx)(d,{className:"divide-y","data-sentry-element":"FormPanelContent","data-sentry-source-file":"FormPanel.tsx",children:t}),r&&(0,s.jsx)(c,{children:r})]})},i=(0,r.forwardRef)((e,t)=>{let{children:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("bg-surface-100 border overflow-hidden rounded-md shadow max-w-full",r.className),children:a})});i.displayName=i.displayName;let o=(0,r.forwardRef)((e,t)=>{let{children:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("border-default border-b px-8 py-4",r.className),children:a})});o.displayName=o.displayName;let d=(0,r.forwardRef)((e,t)=>{let{children:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("divide-border flex flex-col gap-0",r.className),children:a})});d.displayName=d.displayName;let c=(0,r.forwardRef)((e,t)=>{let{children:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("border-t",r.className),children:a})});c.displayName=c.displayName},12484:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(80263),r=a(59153),n=a.n(r),l=a(38220),i=a(65863),o=a(71126);let d=e=>{let{name:t="",isActive:a,isExternal:r,icon:d,rightIcon:c,url:u="",target:x="_self",onClick:m,textClassName:h="",hoverText:p="",label:f}=e,g=(0,s.jsx)(l.Ay.Item,{icon:d,rounded:!0,active:a,onClick:m,children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,s.jsxs)("div",{title:p||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+h,children:[(0,s.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==f&&(0,s.jsx)(i.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:f})]}),c&&(0,s.jsx)("div",{children:c})]})});return u?r?(0,s.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:d,children:(0,s.jsx)(n(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,s.jsx)(n(),{href:u,className:"block",target:x,children:g}):g}},13276:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(80263),r=a(53239),n=a(19480),l=a(29660),i=a(42889),o=a(16865),d=a(3891);let c=function(e){let{defaultValue:t,descriptionText:a,error:c,icon:u,inputRef:x,label:m,afterLabel:h,beforeLabel:p,labelOptional:f,layout:g,value:y,actions:b,size:j="medium",validation:v,id:w="",name:N="",...S}=e,A=(0,o.A)("inputNumber"),{formContextOnChange:k,values:P,errors:C,handleBlur:I,touched:_,fieldLevelValidation:T}=(0,d.x)();P&&!y&&(y=P[w||N]),c||(C&&!c&&(c=C[w||N]),c=_&&_[w||N]?c:void 0),(0,r.useEffect)(()=>{v&&T(w,v(y))},[]);let E=[A.base];return c&&E.push(A.variants.error),c||E.push(A.variants.standard),u&&E.push(A.with_icon),j&&E.push(A.size[j]),S.disabled&&E.push(A.disabled),(0,s.jsx)("div",{className:S.className,"data-sentry-component":"InputNumber","data-sentry-source-file":"InputNumber.tsx",children:(0,s.jsx)(n.H,{label:m,afterLabel:h,beforeLabel:p,labelOptional:f,layout:g,id:w,error:c,descriptionText:a,style:S.style,size:j,"data-sentry-element":"FormLayout","data-sentry-source-file":"InputNumber.tsx",children:(0,s.jsxs)("div",{className:A.container,children:[(0,s.jsx)("input",{"data-size":j,id:w,name:N,onChange:function(e){S.onChange&&S.onChange(e),k&&k(e),v&&T(w,v(e.target.value))},onBlur:function(e){I&&I(e),S.onBlur&&S.onBlur(e)},type:"number",ref:x,value:y,className:E.join(" "),...S}),u&&(0,s.jsx)(i.A,{size:j,icon:u}),c||b?(0,s.jsxs)("div",{className:A.actions_container,children:[c&&(0,s.jsx)(l.A,{size:j}),b&&b]}):null]})})})}},22556:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(23983).A)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},24215:(e,t,a)=>{"use strict";a.d(t,{z:()=>o});var s=a(56947),r=a(40807),n=a(64036),l=a(54244);async function i(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:s,error:n}=await (0,r.Jt)("/platform/projects/{ref}/load-balancers",{params:{path:{ref:a}},signal:t});return n&&(0,r.H4)(n),s}let o=function(e){let{projectRef:t}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)(l.p.loadBalancers(t),e=>{let{signal:a}=e;return i({projectRef:t},a)},{enabled:a&&void 0!==t&&n.pe,...r})}},25400:(e,t,a)=>{"use strict";a.d(t,{$E:()=>c,kV:()=>o,op:()=>d});var s=a(56947),r=a(32144),n=a(40807),l=a(53239),i=a(69830);async function o(e,t){let{projectRef:a}=e;if(!a)throw Error("projectRef is required");let{data:s,error:r}=await (0,n.Jt)("/platform/auth/{ref}/config",{params:{path:{ref:a}},signal:t});return r&&(0,n.H4)(r),s}let d=function(e){let{projectRef:t}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)(i.Z.authConfig(t),e=>{let{signal:a}=e;return o({projectRef:t},a)},{enabled:a&&void 0!==t,...r})},c=e=>{let{projectRef:t}=e,a=(0,r.jE)();return(0,l.useCallback)(()=>{t&&a.prefetchQuery(i.Z.authConfig(t),e=>{let{signal:a}=e;return o({projectRef:t},a)})},[a,t])}},26470:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(23983).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},34962:(e,t,a)=>{"use strict";a.d(t,{xf:()=>f,sD:()=>j,Oe:()=>w,DG:()=>v,hw:()=>g});var s=a(80263),r=a(62763),n=a(27452),l=a(44679),i=a(53239),o=a(79279),d=a(21514),c=a(51859),u=a(65863),x=a(36141);let m=i.createContext(null),h=(0,c.cn)("relative text-foreground-lighter text-left px-2 py-1.5 rounded","hover:text-foreground hover:!bg-overlay-hover w-full flex items-center space-x-2","peer-data-[value=true]:bg-overlay-hover peer-data-[value=true]:text-strong");function p(){let e=i.useContext(m);if(!e)throw Error("useMultiSelect must be used within a MultiSelectProvider");return e}function f(e){var t;let{values:a=[],onValuesChange:r,disabled:n,dir:l,size:o,className:d,children:u,...h}=e,p=i.useRef(null),[f,g]=i.useState(!1),[y,b]=i.useState(""),[j,v]=i.useState(-1),w=i.useCallback(e=>{a.includes(e)?r(a.filter(t=>t!==e)||[]):r([...a,e])},[a]);t=()=>{f&&g(!f)},(0,i.useEffect)(()=>{let e=e=>{!p.current||p.current.contains(e.target)||t(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[p,t]);let N=i.useCallback(e=>{switch(e.key){case"Backspace":case"Delete":a.length>0&&0===y.length&&(-1!==j&&j<a.length?(r(a.filter(e=>e!==a[j])),v(j-1<0?0:j-1)):r(a.filter(e=>e!==a[a.length-1])));break;case"Escape":if(-1!==j?v(-1):g(!1),p.current){let e=p.current.querySelector('button[role="combobox"]');e&&e.focus()}break;case"Enter":g(!0)}},[a,y,j]);return(0,s.jsx)(m.Provider,{value:{values:a,toggleValue:w,onValuesChange:r,open:f,setOpen:g,inputValue:y,setInputValue:b,activeIndex:j,setActiveIndex:v,size:o||"small",disabled:n},"data-sentry-element":"unknown","data-sentry-component":"MultiSelector","data-sentry-source-file":"multi-select.tsx",children:(0,s.jsx)(x.uB,{ref:p,onKeyDown:N,className:(0,c.cn)("relative w-auto overflow-visible bg-transparent flex flex-col",d),dir:l,...h,"data-sentry-element":"Command","data-sentry-source-file":"multi-select.tsx",children:u})})}(0,o.F)("",{variants:{size:{...d.vs}},defaultVariants:{size:d.FE}});let g=i.forwardRef((e,t)=>{let{label:a,persistLabel:l=!1,className:o,deletableBadge:d=!0,badgeLimit:x=9999,showIcon:m=!0,mode:h="combobox",children:f,...g}=e,{activeIndex:y,values:j,setInputValue:v,toggleValue:w,disabled:N,setOpen:S}=p(),A=i.useRef(null);i.useImperativeHandle(t,()=>A.current);let k=i.useRef(null),P=i.useRef(null),[C,I]=i.useState([]),[_,T]=i.useState(0),[E,R]=i.useState(!1),M="wrap"===x,z="number"==typeof x,F="inline-combobox"===h;i.useEffect(()=>{(null==A?void 0:A.current)&&P.current&&(M?(I(j),T(0)):(I(j.slice(0,x)),T(Math.max(0,j.length-x))))},[j,x]);let L="rounded shrink-0 px-1.5",D=i.useCallback(e=>{S(!0),v(""),F&&(e.stopPropagation(),e.preventDefault(),setTimeout(()=>{var e;null==(e=k.current)||e.focus()},100))},[]);return(0,s.jsxs)("button",{ref:A,onClick:e=>!E&&D(e),disabled:N,type:"button",role:"combobox",className:(0,c.cn)("flex w-full min-w-[200px] min-h-[40px] items-center justify-between rounded-md border","border-alternative bg-foreground/[.026] px-3 py-2 text-sm","ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","hover:border-primary transition-colors duration-200",o),...g,children:[(0,s.jsxs)("div",{ref:P,className:(0,c.cn)("flex gap-1 -ml-1 overflow-hidden flex-1",M&&"flex-wrap",!M&&"overflow-x-auto scrollbar-thin scrollbar-track-transparent transition-colors scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted scrollbar-thumb-rounded-lg"),children:[C.map(e=>(0,s.jsxs)(u.E,{className:L,children:[e,d&&(0,s.jsx)("div",{onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),onClick:t=>{t.stopPropagation(),w(e),R(!1)},className:"ml-1 text-foreground-lighter hover:text-foreground-light transition-colors pointer-events-auto",children:(0,s.jsx)(r.A,{size:12})})]},e)),_>0&&(0,s.jsx)(u.E,{className:L,children:z&&x<1?"".concat(_," item").concat(_>1?"s":""," selected"):"+".concat(_)}),(0,s.jsx)("span",{className:(0,c.cn)("text-foreground-muted whitespace-nowrap leading-[1.375rem] ml-1 opacity-0 transition-opacity hidden",!F&&(l||0===j.length)&&"opacity-100 visible inline"),children:a}),F&&(0,s.jsx)(b,{ref:k,showSearchIcon:!1,onValueChange:-1===y?v:void 0,placeholder:a,autoFocus:!1,wrapperClassName:(0,c.cn)("px-0 flex-1 border-none truncate",M&&"min-w-[85px]"),className:"py-0 px-1 truncate"})]}),m&&(0,s.jsx)(n.A,{size:16,strokeWidth:2,className:"text-foreground-lighter shrink-0 ml-1.5"})]})});g.displayName="MultiSelectorTrigger",f.Trigger=g;let y=(0,o.F)("bg-control border",{variants:{size:{...d.vs}},defaultVariants:{size:d.FE}}),b=i.forwardRef((e,t)=>{let{className:a,wrapperClassName:r,showResetIcon:n,showSearchIcon:l,...o}=e,{open:d,setOpen:u,inputValue:m,setInputValue:h,activeIndex:f,setActiveIndex:g,size:b,disabled:j}=p(),v=i.useRef(null);i.useImperativeHandle(t,()=>v.current);let w=()=>{setTimeout(()=>{(null==v?void 0:v.current)&&d&&v.current.focus()},100)};return(0,i.useEffect)(()=>{if(w(),!d){var e;null==(e=v.current)||e.blur()}},[d]),(0,s.jsx)(x.G7,{ref:v,value:m,onValueChange:-1===f?h:void 0,onFocus:()=>u(!0),onClick:()=>g(-1),tabIndex:d?0:-1,disabled:j,showSearchIcon:l,showResetIcon:n,handleReset:()=>{h(""),w()},wrapperClassName:r,className:(0,c.cn)(y({size:b}),"text-sm bg-transparent h-full flex-grow border-none outline-none placeholder:text-foreground-muted flex-1",-1!==f&&"caret-transparent",a),...o})});b.displayName="MultiSelectorInput",f.Input=b;let j=i.forwardRef((e,t)=>{let{className:a,children:r}=e,{open:n}=p();return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("absolute w-full bg-overlay shadow-md z-10 border border-overlay top-[calc(100%+0.25rem)] rounded-md transition-all -translate-y-3",n?"opacity-100 translate-y-0 visible duration-150 ease-[.76,0,.23,1]":"opacity-0 -translate-y-3 invisible duration-0",a),children:n&&r})});j.displayName="MultiSelectorContent",f.Content=j;let v=i.forwardRef((e,t)=>{let{className:a,children:r,creatable:n=!1}=e,{open:l,inputValue:i,setInputValue:o,toggleValue:d}=p(),u=r?Array.isArray(r)?r:"object"==typeof r&&"props"in r?r.props.children:[]:[],m=u.filter(e=>!!e.props.value).map(e=>e.props.value.toLowerCase()).some(e=>e===i.toLowerCase());return(0,s.jsxs)(x.oI,{ref:t,className:(0,c.cn)("p-2 flex flex-col gap-2 scrollbar-thin scrollbar-track-transparent transition-colors","scrollbar-thumb-muted-foreground dark:scrollbar-thumb-muted","scrollbar-thumb-rounded-lg w-full max-h-[300px] overflow-y-auto",a),children:[r,n&&i.length>0&&!m?(0,s.jsxs)(x.h_,{role:"option",onSelect:()=>{l&&d(i),o("")},className:h,children:['Create "',i,'"']}):n&&0===u.length?(0,s.jsx)("div",{className:"p-2 py-1.5 text-xs text-foreground-lighter font-italic",children:"Type to add a value"}):(0,s.jsx)(x.xL,{children:(0,s.jsx)("span",{className:"text-foreground-muted",children:"No results found"})})]})});v.displayName="MultiSelectorList",f.List=v;let w=i.forwardRef((e,t)=>{let{className:a,value:r,children:n,...i}=e,{values:o,setInputValue:d,toggleValue:u,open:m}=p(),f=o.includes(r);return(0,s.jsxs)(x.h_,{ref:t,tabIndex:m?0:-1,role:"option",onSelect:()=>{m&&u(r),d("")},className:(0,c.cn)(h,a),...i,children:[(0,s.jsx)("div",{className:(0,c.cn)("flex items-center justify-center","peer h-4 w-4 shrink-0 rounded border border-control bg-control/25 ring-offset-background","transition-colors duration-150 ease-in-out","hover:border-strong","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-foreground data-[state=checked]:text-background",f?"bg-foreground text-background":"[&_svg]:invisible"),children:(0,s.jsx)(l.A,{className:"h-3 w-3",strokeWidth:4})}),(0,s.jsx)("div",{className:"text-xs flex-grow leading-none pointer-events-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:pointer-events-none peer-disabled:opacity-50",children:n})]})});w.displayName="MultiSelectorItem",f.Item=w},38220:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>x});var s=a(80263),r=a(53239),n=a(16865),l=a(51859);function i(e){let{children:t,className:a,tag:r="div",style:n}=e;return(0,s.jsx)("".concat(r),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}i.Title=function(e){let{className:t,level:a=1,children:r,style:n}=e;return(0,s.jsx)("h".concat(a),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:r})},i.Text=function(e){let{className:t,children:a,style:r,type:n,disabled:l,mark:i,code:o,keyboard:d,underline:c,strikethrough:u,strong:x,small:m}=e;return o?(0,s.jsx)("code",{style:r,children:a}):i?(0,s.jsx)("mark",{style:r,children:a}):d?(0,s.jsx)("kbd",{style:r,children:a}):x?(0,s.jsx)("strong",{style:r,children:a}):(0,s.jsx)("span",{style:r,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:a})},i.Link=function(e){let{children:t,target:a="_blank",href:r,className:n,onClick:l,style:i}=e;return(0,s.jsx)("a",{onClick:l,href:r,target:a,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let o=(0,r.createContext)({type:"text"}),d=e=>{let{type:t}=e;return(0,s.jsx)(o.Provider,{value:{type:t},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},c=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:a,ulClassName:r,style:n,type:l="text"}=e;return(0,s.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:n,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)(d,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)("ul",{className:r,children:t})})})}u.Item=function(e){let{children:t,icon:a,active:r,rounded:i,onClick:o,doNotCloseOverlay:d=!1,showActiveBar:u=!1,style:x}=e,m=(0,n.A)("menu"),{type:h}=c(),p=[m.item.base];p.push(m.item.variants[h].base),r?p.push(m.item.variants[h].active):p.push(m.item.variants[h].normal);let f=[m.item.content.base];r?f.push(m.item.content.active):f.push(m.item.content.normal);let g=[m.item.icon.base];return r?g.push(m.item.icon.active):g.push(m.item.icon.normal),(0,s.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",p),style:x,onClick:o,"aria-current":r?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[a&&(0,s.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:a}),(0,s.jsx)("span",{className:f.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:a,title:r}=e,l=(0,n.A)("menu"),{type:i}=c();return(0,s.jsxs)("div",{className:[l.group.base,l.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[a&&(0,s.jsx)("span",{className:l.group.icon,children:a}),(0,s.jsx)("span",{className:l.group.content,children:r}),t]})},u.Misc=function(e){let{children:t}=e;return(0,s.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)(i.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,s.jsx)("span",{children:t})})})};let x=u},39071:(e,t,a)=>{"use strict";a.d(t,{l:()=>i});var s=a(80263),r=a(38220),n=a(65863),l=a(12484);let i=e=>{let{page:t,menu:a}=e;return(0,s.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,s.jsx)(r.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:a.map((e,i)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"my-6 space-y-8",children:(0,s.jsxs)("div",{className:"mx-3",children:[(0,s.jsx)(r.Ay.Group,{title:e.title?(0,s.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,s.jsx)("span",{children:e.title}),e.isPreview&&(0,s.jsx)(n.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,s.jsx)("div",{children:e.items.map(e=>{let a=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,s.jsx)(l.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:a,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),i!==a.length-1&&(0,s.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},40402:(e,t,a)=>{"use strict";a.d(t,{BS:()=>i,Dm:()=>c,HJ:()=>b,Rf:()=>g,Uw:()=>d,Vw:()=>w,Xr:()=>v,aw:()=>p,bV:()=>l,cJ:()=>m,dX:()=>u,eh:()=>o,fh:()=>j,gu:()=>x,sZ:()=>h,tn:()=>y,xp:()=>f});var s=a(80263),r=a(53239),n=a(51859);let l="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",o=(0,r.forwardRef)((e,t)=>{let{className:a,bottomPadding:r,size:l="default",...o}=e;return(0,s.jsx)("div",{ref:t,...o,className:(0,n.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[l],i,r&&"pb-16",a)})}),d=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("header",{...r,ref:t,className:(0,n.cn)("w-full","flex-col gap-3 py-6",a)})}),c=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h1",{ref:t,...r,className:(0,n.cn)("text-2xl",a)})}),u=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,...r,className:(0,n.cn)("text-sm text-foreground-light",a)})}),x=(0,r.forwardRef)((e,t)=>{let{className:a,isFullWidth:r,topPadding:l,...i}=e;return(0,s.jsx)("div",{ref:t,...i,className:(0,n.cn)("flex flex-col first:pt-12 py-6",r?"w-full":"gap-3 lg:grid md:grid-cols-12",a)})}),m=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("w-full h-px bg-border",a)})}),h=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,...r,className:(0,n.cn)("text-foreground text-xl",a)})}),p=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,...r,className:(0,n.cn)("text-sm text-foreground-light",a)})}),f=(0,r.forwardRef)((e,t)=>{let{className:a,children:r,title:l,...i}=e;return(0,s.jsxs)("div",{ref:t,...i,className:(0,n.cn)("col-span-4 xl:col-span-5 prose text-sm",a),children:[l&&(0,s.jsx)("h2",{children:l}),r]})}),g=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",a)})}),y=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("flex flex-col gap-3 items-center",a)})}),b=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("flex w-full items-center",a)})}),j=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("flex flex-row gap-3",a)})}),v=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)("flex flex-col gap-3","min-w-[420px]",a)})}),w=(0,r.forwardRef)((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,...r,className:(0,n.cn)(l,i,"my-8 flex flex-col gap-8",a)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",m.displayName="ScaffoldDivider",x.displayName="ScaffoldSection",v.displayName="ScaffoldColumn",f.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",b.displayName="ScaffoldActionsContainer",j.displayName="ScaffoldActionsGroup",w.displayName="ScaffoldContainerLegacy",h.displayName="ScaffoldSectionTitle",p.displayName="ScaffoldSectionDescription"},44893:(e,t,a)=>{"use strict";a.d(t,{bL:()=>v,zi:()=>w});var s=a(54993),r=a(53239),n=a(91968),l=a(63774),i=a(68436),o=a(87990),d=a(15630),c=a(89422),u=a(70297);let x="Switch",[m,h]=(0,i.A)(x),[p,f]=m(x),g=(0,r.forwardRef)((e,t)=>{let{__scopeSwitch:a,name:i,checked:d,defaultChecked:c,required:x,disabled:m,value:h="on",onCheckedChange:f,...g}=e,[y,v]=(0,r.useState)(null),w=(0,l.s)(t,e=>v(e)),N=(0,r.useRef)(!1),S=!y||!!y.closest("form"),[A=!1,k]=(0,o.i)({prop:d,defaultProp:c,onChange:f});return(0,r.createElement)(p,{scope:a,checked:A,disabled:m},(0,r.createElement)(u.sG.button,(0,s.A)({type:"button",role:"switch","aria-checked":A,"aria-required":x,"data-state":j(A),"data-disabled":m?"":void 0,disabled:m,value:h},g,{ref:w,onClick:(0,n.m)(e.onClick,e=>{k(e=>!e),S&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})})),S&&(0,r.createElement)(b,{control:y,bubbles:!N.current,name:i,value:h,checked:A,required:x,disabled:m,style:{transform:"translateX(-100%)"}}))}),y=(0,r.forwardRef)((e,t)=>{let{__scopeSwitch:a,...n}=e,l=f("SwitchThumb",a);return(0,r.createElement)(u.sG.span,(0,s.A)({"data-state":j(l.checked),"data-disabled":l.disabled?"":void 0},n,{ref:t}))}),b=e=>{let{control:t,checked:a,bubbles:n=!0,...l}=e,i=(0,r.useRef)(null),o=(0,d.Z)(a),u=(0,c.X)(t);return(0,r.useEffect)(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==a&&t){let s=new Event("click",{bubbles:n});t.call(e,a),e.dispatchEvent(s)}},[o,a,n]),(0,r.createElement)("input",(0,s.A)({type:"checkbox","aria-hidden":!0,defaultChecked:a},l,{tabIndex:-1,ref:i,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function j(e){return e?"checked":"unchecked"}let v=g,w=y},45283:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eX});var s=a(80263),r=a(53337),n=a(32144),l=a(55866),i=a(53239),o=a(73969),d=a(19898),c=a(97872),u=a(80489),x=a(21889),m=a(96457),h=a(78313),p=a(20010),f=a(15643),g=a(24215),y=a(61428),b=a(64036),j=a(51626),v=a(16988),w=a(65863);let N={[r.RZ.APIServicesConfigurationUpdateFailed]:"failed to update configuration for API services",[r.RZ.APIServicesRestartFailed]:"failed to restart API services",[r.RZ.DatabaseAdminAPIConfigurationUpdateFailed]:"failed to update configuration for database admin API",[r.RZ.PostgreSQLRestartFailed]:"failed to restart PostgreSQL service",[r.RZ.SupabaseAPIKeyUpdateFailed]:"failed to update Supabase API key",[r.RZ.APIGatewayUpdateFailed]:"failed to update API Gateway"},S={[r.Ks.RestartedAPIServices]:"restarted API services",[r.Ks.RestartedPostgreSQL]:"restarted PostgreSQL service",[r.Ks.Started]:"started updating",[r.Ks.UpdatedAPIServicesConfiguration]:"updated configuration for API services",[r.Ks.UpdatedDatabaseAdminAPIConfiguration]:"updated configuration for database admin API",[r.Ks.UpdatedAPIGatewayConfiguration]:"updated configuration for API Gateway"};var A=a(60045),k=a(8945),P=a(62659),C=a(653),I=a(23983);let _=(0,I.A)("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),T=(0,I.A)("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),E=(0,I.A)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),R=(0,I.A)("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]),M=(0,I.A)("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);var z=a(22556),F=a(72078),L=a(3762),D=a(86692),W=a(41370),J=a(95268),H=a(25400),U=a(88439),V=a(80251),B=a(40807);async function q(e){let{projectRef:t,jwtSecret:a,changeTrackingId:s}=e,{data:r,error:n}=await (0,B.F6)("/platform/projects/{ref}/config/secrets",{params:{path:{ref:t}},body:{jwt_secret:a,change_tracking_id:s}});return n&&(0,B.H4)(n),r}let G=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,n.jE)();return(0,V.n)(e=>q(e),{async onSuccess(t,a,r){let{projectRef:n}=a;await s.invalidateQueries(p.n.jwtSecretUpdatingStatus(n)),await (null==e?void 0:e(t,a,r))},async onError(e,a,s){void 0===t?o.oR.error("Failed to submit JWT secret update request: ".concat(e.message)):t(e,a,s)},...a})};var K=a(98453),O=a(77227),X=a(49443),$=a(66586),Q=a(13276),Y=a(71126),Z=a(74115),ee=a(67920),et=a(70324),ea=a(83086),es=a(10406),er=a(64540);let en=(0,D.object)({JWT_EXP:(0,D.number)().max(604800,"Must be less than 604800").required("Must have a JWT expiry value")}),el=()=>{var e;let{ref:t}=(0,d.g)(),[a,n]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),[m,p]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),y=(0,O.SE)(A.aG.READ,"field.jwt_secret"),b=(0,O.SE)(A.aG.INFRA_EXECUTE,"queue_job.projects.update_jwt"),j=(0,O.SE)(A.aG.UPDATE,"custom_config_gotrue"),{data:w}=(0,h.l)({projectRef:t}),{data:I,isError:D}=(0,K.y)({projectRef:t}),{mutateAsync:V,isLoading:B}=G(),{data:q,error:el,isLoading:ei,isSuccess:eo}=(0,H.op)({projectRef:t}),{mutate:ed,isLoading:ec}=(0,U.U)(),{Failed:eu,Updated:ex,Updating:em}=r.bh,eh=(null==w?void 0:w.jwtSecretUpdateStatus)===eu,ep=(null==w?void 0:w.jwtSecretUpdateStatus)===void 0||(null==w?void 0:w.jwtSecretUpdateStatus)===ex,ef=(null==w?void 0:w.jwtSecretUpdateStatus)===em,eg=N[null==w?void 0:w.jwtSecretUpdateError],ey=S[null==w?void 0:w.jwtSecretUpdateProgress],eb={JWT_EXP:null!=(e=null==q?void 0:q.JWT_EXP)?e:3600},ej=async(e,a)=>{let{resetForm:s}=a;if(!t)return console.error("Project ref is required");ed({projectRef:t,config:e},{onError:e=>{o.oR.error("Failed to update JWT expiry: ".concat(null==e?void 0:e.message))},onSuccess:()=>{o.oR.success("Successfully updated JWT expiry"),s({values:e,initialValues:e})}})};async function ev(e,a){if(!t)return console.error("Project ref is required");let s=(0,X.gZ)();try{await V({projectRef:t,jwtSecret:e,changeTrackingId:s}),a(!1),(0,o.oR)("Successfully submitted JWT secret update request. Please wait while your project is updated.")}catch(e){o.oR.error("Failed to update JWT secret. Please try again."),console.error("Failed to update JWT secret:",e)}}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.A,{id:"jwt-exp-form",initialValues:eb,onSubmit:ej,validationSchema:en,"data-sentry-element":"Form","data-sentry-source-file":"JWTSettings.tsx",children:e=>{let{handleReset:t,values:a,initialValues:r}=e,n=JSON.stringify(a)!==JSON.stringify(r);return(0,s.jsx)(x.A,{title:(0,s.jsx)("h5",{className:"mb-0",children:"JWT Settings"}),footer:(0,s.jsx)("div",{className:"flex py-4 w-full",children:(0,s.jsx)(J.I,{form:"jwt-exp-form",isSubmitting:ec,hasChanges:n,handleReset:t,disabled:!j,helper:j?void 0:"You need additional permissions to update JWT settings"})}),children:(0,s.jsx)(x.A.Content,{className:"space-y-6 border-t border-panel-border-interior-light [[data-theme*=dark]_&]:border-panel-border-interior-dark",children:D?(0,s.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,s.jsx)(l.A,{size:16,strokeWidth:1.5}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Failed to retrieve JWT settings"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.A,{label:"JWT Secret",readOnly:!0,copy:y&&ep,reveal:y&&ep,disabled:!0,value:y?eh?"JWT secret update failed":ef?"Updating JWT secret...":(null==I?void 0:I.jwt_secret)||"":"You need additional permissions to view the JWT secret",className:"input-mono",descriptionText:"Used to decode your JWTs. You can also use this to mint your own JWTs.",layout:"horizontal"}),(0,s.jsx)(Q.A,{id:"JWT_EXP",name:"JWT_EXP",size:"small",label:"Access token expiry time",descriptionText:"How long access tokens are valid for before a refresh token has to be used. Recommendation: 3600 (1 hour).",layout:"horizontal",actions:(0,s.jsx)("span",{className:"mr-3 text-foreground-lighter",children:"seconds"}),disabled:!j||ei}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"p-3 px-6 border rounded-md shadow-sm bg-studio",children:ef?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(k.A,{className:"animate-spin",size:14}),(0,s.jsxs)("p",{className:"text-sm",children:["Updating JWT secret: ",ey]})]}):(0,s.jsx)("div",{className:"w-full space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("p",{className:"text-sm",children:"Generate a new JWT secret"}),(0,s.jsx)("p",{className:"text-sm opacity-50",children:"A random secret will be created, or you can create your own."})]}),(0,s.jsx)("div",{className:"flex flex-col items-end",children:ef?(0,s.jsx)(Y.$,{loading:!0,type:"secondary",children:"Updating JWT secret..."}):b?(0,s.jsxs)(Z.rI,{children:[(0,s.jsx)(Z.ty,{asChild:!0,children:(0,s.jsx)(Y.$,{type:"default",iconRight:(0,s.jsx)(P.A,{size:14}),children:(0,s.jsx)("span",{children:"Generate a new secret"})})}),(0,s.jsxs)(Z.SQ,{align:"end",side:"bottom",children:[(0,s.jsxs)(Z._2,{className:"space-x-2",onClick:()=>g(!0),children:[(0,s.jsx)(C.A,{size:16}),(0,s.jsx)("p",{children:"Generate a random secret"})]}),(0,s.jsx)(Z.mB,{}),(0,s.jsxs)(Z._2,{className:"space-x-2",onClick:()=>p(!0),children:[(0,s.jsx)(_,{size:16}),(0,s.jsx)("p",{children:"Create my own secret"})]})]})]}):(0,s.jsx)(W.G,{disabled:!0,type:"default",iconRight:(0,s.jsx)(P.A,{size:14}),tooltip:{content:{side:"bottom",text:"You need additional permissions to generate a new JWT secret"}},children:"Generate a new secret"})})]})})}),eh?(0,s.jsxs)(es.Z,{type:"warning",title:"Failed to update JWT secret",children:["Please try again. If the failures persist, please contact Supabase support with the following details: ",(0,s.jsx)("br",{}),"Change tracking ID: ",null==w?void 0:w.changeTrackingId," ",(0,s.jsx)("br",{}),"Error message: ",eg]}):null]})]})})})}},null==q?void 0:q.JWT_EXP),(0,s.jsx)(er.A,{variant:"destructive",size:"large",visible:f,title:"Generate a new JWT secret",confirmLabel:"Generate new secret",confirmLabelLoading:"Generating",onCancel:()=>g(!1),onConfirm:()=>ev("ROLL",g),"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"JWTSettings.tsx",children:(0,s.jsxs)("ul",{className:"mt-4 space-y-5 text-sm",children:[(0,s.jsxs)("li",{className:"flex gap-4",children:[(0,s.jsx)("span",{className:"shrink-0 mt-1",children:(0,s.jsx)(T,{size:24,className:"flex-shrink-0","data-sentry-element":"KeyRound","data-sentry-source-file":"JWTSettings.tsx"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:"This will invalidate all API keys"}),(0,s.jsxs)("p",{children:["Generating a new JWT secret will invalidate ",(0,s.jsx)("u",{className:"text-foreground",children:"all"})," ","existing keys, including ",(0,s.jsx)("code",{className:"text-xs text-code",children:"service_role"})," ",(0,s.jsx)("code",{className:"text-xs text-code !bg-destructive !text-white !border-destructive",children:"secret"})," ","and ",(0,s.jsx)("code",{className:"text-xs text-code",children:"anon"})," ",(0,s.jsx)("code",{className:"text-xs text-code",children:"public"}),"."]})]})]}),(0,s.jsxs)("li",{className:"flex gap-4",children:[(0,s.jsx)("span",{className:"shrink-0 mt-1",children:(0,s.jsx)(E,{size:24,className:"flex-shrink-0","data-sentry-element":"Power","data-sentry-source-file":"JWTSettings.tsx"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:"Your project will be restarted"}),(0,s.jsx)("p",{children:"This process restarts your project, terminating existing connections. You may see API errors for up to 2 minutes while the new secret is deployed."})]})]}),(0,s.jsxs)("li",{className:"flex gap-4",children:[(0,s.jsx)("span",{className:"shrink-0 mt-1",children:(0,s.jsx)(R,{size:24,className:"flex-shrink-0","data-sentry-element":"Hourglass","data-sentry-source-file":"JWTSettings.tsx"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:"20-minute cooldown"}),(0,s.jsx)("p",{children:"Keys can only be regenerated every 20 minutes."})]})]}),(0,s.jsxs)("li",{className:"flex gap-4",children:[(0,s.jsx)("span",{className:"shrink-0 mt-1",children:(0,s.jsx)(M,{size:24,className:"flex-shrink-0","data-sentry-element":"Undo","data-sentry-source-file":"JWTSettings.tsx"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:"This cannot be undone"}),(0,s.jsx)("p",{children:"The old JWT secret will be lost, all API keys invalidated, and open connections terminated."})]})]})]})}),(0,s.jsx)(ee.A,{header:"Create a custom JWT secret",visible:m,size:"medium",variant:"danger",loading:B,customFooter:(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(Y.$,{type:"default",onClick:()=>p(!1),children:"Cancel"}),(0,s.jsx)(Y.$,{type:"primary",disabled:a.length<32||a.includes("@")||a.includes("$"),loading:B,onClick:()=>ev(a,p),children:"Apply new JWT secret"})]}),"data-sentry-element":"Modal","data-sentry-source-file":"JWTSettings.tsx",children:(0,s.jsxs)(ee.A.Content,{className:"space-y-2","data-sentry-element":"unknown","data-sentry-source-file":"JWTSettings.tsx",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Create a custom JWT secret. Make sure it is a strong combination of characters that cannot be guessed easily."}),(0,s.jsxs)(et.Fc,{variant:"warning","data-sentry-element":"Alert_Shadcn_","data-sentry-source-file":"JWTSettings.tsx",children:[(0,s.jsx)(ea.id,{"data-sentry-element":"WarningIcon","data-sentry-source-file":"JWTSettings.tsx"}),(0,s.jsx)(et.XL,{"data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"JWTSettings.tsx",children:"This will invalidate all existing API keys"}),(0,s.jsxs)(et.TN,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"JWTSettings.tsx",children:["Generating a new JWT secret will invalidate ",(0,s.jsx)("u",{className:"text-foreground",children:"all"})," of your API keys, including your ",(0,s.jsx)("code",{className:"text-xs",children:"service_role"})," and"," ",(0,s.jsx)("code",{className:"text-xs",children:"anon"})," keys. Your project will also be restarted during this process, which will terminate any existing connections."]})]}),(0,s.jsx)(v.A,{onChange:e=>n(e.target.value),value:a,icon:(0,s.jsx)(z.A,{}),type:c?"text":"password",className:"w-full text-left",label:"Custom JWT secret",descriptionText:"Minimally 32 characters long, '@' and '$' are not allowed.",actions:(0,s.jsx)("div",{className:"flex items-center justify-center mr-1",children:(0,s.jsx)(Y.$,{type:"default",icon:c?(0,s.jsx)(F.A,{}):(0,s.jsx)(L.A,{}),onClick:()=>u(!c)})}),"data-sentry-element":"Input","data-sentry-source-file":"JWTSettings.tsx"})]})})]})};var ei=a(32981),eo=a(8848),ed=a.n(eo),ec=a(26470),eu=a(59153),ex=a.n(eu),em=a(87494),eh=a(39353),ep=a(23992),ef=a(9359),eg=a(81766),ey=a(89771),eb=a(788),ej=a(57980),ev=a(91378),ew=a(22979),eN=a(71390),eS=a(25171),eA=a(24794),ek=a(84377),eP=a(34962),eC=a(44679),eI=a(72256),e_=a(95059),eT=a(96557);async function eE(e){let{projectRef:t,connectionString:a,existingPostgrestConfig:s}=e;await (0,eT.E)({projectRef:t,connectionString:a,sql:"\ncreate schema if not exists api;\ngrant usage on schema api to anon, authenticated;\n  ".trim()});let{db_extra_search_path:r,db_pool:n,db_schema:l,max_rows:i}=s,{error:o}=await (0,B.F6)("/platform/projects/{ref}/config/postgrest",{params:{path:{ref:t}},body:{db_pool:n,max_rows:i,db_extra_search_path:r,db_schema:"api, ".concat(l)}});return o&&(0,B.H4)(o),!0}let eR=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,n.jE)();return(0,V.n)(e=>eE(e),{async onSuccess(t,a,r){let{projectRef:n}=a;await Promise.all([s.invalidateQueries(e_.c.schemas(n)),s.invalidateQueries(p.n.postgrest(n))]),await (null==e?void 0:e(t,a,r))},async onError(e,a,s){void 0===t?o.oR.error("Failed to create and expose API schema: ".concat(e.message)):t(e,a,s)},...a})};var eM=a(68875),ez=a(82758),eF=a(64940);let eL=e=>{var t;let{visible:a,onClose:r}=e,n=(0,eM.KT)(),{data:l}=(0,eb.w$)({projectRef:null==n?void 0:n.ref,connectionString:null==n?void 0:n.connectionString}),{data:i}=(0,K.y)({projectRef:null==n?void 0:n.ref}),d=(null!=l?l:[]).find(e=>"api"===e.name),c=null!=(t=null==i?void 0:i.db_schema.split(",").map(e=>e.trim()))?t:[],u=c.includes("api"),x=c.includes("public"),{mutate:m,isLoading:h}=eR({onSuccess:()=>{o.oR.success("Successfully created api schema and exposed via Data API")}}),{mutate:p,isLoading:f}=(0,eg.c)({onSuccess:()=>{o.oR.success("Success removed public schema from exposed schemas")}});return(0,s.jsx)(ez.lG,{open:a,onOpenChange:r,"data-sentry-element":"Dialog","data-sentry-component":"HardenAPIModal","data-sentry-source-file":"HardenAPIModal.tsx",children:(0,s.jsxs)(ez.Cf,{size:"large","data-sentry-element":"DialogContent","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)(ez.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsx)(ez.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"HardenAPIModal.tsx",children:"Switch the default API schema"}),(0,s.jsxs)(ez.rr,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"HardenAPIModal.tsx",children:["Expose a custom schema instead of the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema"]})]}),(0,s.jsx)(ez.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(ez.OO,{className:"text-sm text-foreground-light","data-sentry-element":"DialogSection","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{children:["By default, the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema is used to generate API routes. In some cases, it's better to use a custom schema. This is important if you use tools that generate tables in the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema to"," ",(0,s.jsx)("span",{className:"text-brand",children:"prevent accidental exposure of data"}),"."]}),(0,s.jsx)(ep.A,{abbrev:!1,className:"w-min mt-4",href:"https://supabase.com/docs/guides/database/hardening-data-api","data-sentry-element":"DocsButton","data-sentry-source-file":"HardenAPIModal.tsx"})]}),(0,s.jsx)(ez.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(eN.Nt,{"data-sentry-element":"Collapsible_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)(eN.R6,{className:"py-4 px-5 w-full flex items-center justify-between text-sm","data-sentry-element":"CollapsibleTrigger_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{children:["1. Create a custom ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," schema and expose it"]}),d&&u?(0,s.jsx)(eC.A,{size:16,className:"text-brand"}):(0,s.jsx)(P.A,{size:16,className:"transition data-open-parent:rotate-180 data-closed-parent:rotate-0"})]}),(0,s.jsxs)(eN.Ke,{className:"text-sm text-foreground-light flex flex-col gap-y-4","data-sentry-element":"CollapsibleContent_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{className:"mx-5",children:["Click the button below to create a new schema named"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," and grant the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"anon"})," and"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"authenticated"})," roles usage privileges on this schema. This schema will thereafter also be exposed to the Data API."]}),(0,s.jsx)("div",{className:"px-5",children:(0,s.jsx)(eI.A,{title:"How is the schema created?",description:(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,s.jsxs)("p",{children:["The following query will be run to create the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," schema , as well as to grant the necessary privileges to the respective roles"]}),(0,s.jsx)(eF.N,{language:"sql",className:"p-1 language-bash prose dark:prose-dark max-w-[68.3ch]",children:"create schema if not exists api;\ngrant usage on schema api to anon, authenticated;"})]}),"data-sentry-element":"InformationBox","data-sentry-source-file":"HardenAPIModal.tsx"})}),(0,s.jsx)(W.G,{type:"primary",className:"w-min mx-5",onClick:()=>void 0===n?console.error("Project is required"):void 0===i?console.error("Postgrest config is required"):void m({projectRef:null==n?void 0:n.ref,connectionString:null==n?void 0:n.connectionString,existingPostgrestConfig:{max_rows:i.max_rows,db_pool:i.db_pool,db_schema:i.db_schema,db_extra_search_path:null==i?void 0:i.db_extra_search_path}}),disabled:d&&u,loading:h,tooltip:{content:{side:"right",text:d&&u?"Schema has already been created and exposed":void 0}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"HardenAPIModal.tsx",children:"Create and expose schema to Data API"}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-4 px-5 pb-4",children:[(0,s.jsxs)("p",{children:["Under these new settings, the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"anon"})," ","and ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"authenticated"})," roles can execute functions defined in the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," ","schema, but they have no automatic permissions on any tables. On a table-by-table basis, you can grant them permissions by running the following command:"]}),(0,s.jsx)(eF.N,{language:"sql",className:"p-1 language-bash prose dark:prose-dark max-w-[68.3ch]","data-sentry-element":"CodeBlock","data-sentry-source-file":"HardenAPIModal.tsx",children:"grant select on table api.<your_table> to anon;\ngrant select, insert, update, delete on table api.<your_table> to authenticated;"})]})]})]}),(0,s.jsx)(ez.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(eN.Nt,{"data-sentry-element":"Collapsible_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)(eN.R6,{className:"py-4 px-5 w-full flex items-center justify-between text-sm","data-sentry-element":"CollapsibleTrigger_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsxs)("p",{children:["2. Remove the ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema from the exposed schemas"]}),x?(0,s.jsx)(P.A,{size:16,className:"transition data-open-parent:rotate-180 data-closed-parent:rotate-0"}):(0,s.jsx)(eC.A,{size:16,className:"text-brand"})]}),(0,s.jsx)(eN.Ke,{className:"text-sm text-foreground-light","data-sentry-element":"CollapsibleContent_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:(0,s.jsxs)("div",{className:"px-5 pb-4 flex flex-col gap-y-4",children:[(0,s.jsxs)(et.Fc,{variant:"warning","data-sentry-element":"Alert_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:[(0,s.jsx)(ea.id,{"data-sentry-element":"WarningIcon","data-sentry-source-file":"HardenAPIModal.tsx"}),(0,s.jsxs)(et.XL,{className:"text-foreground","data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:["Ensure that your app is no longer using the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema"]}),(0,s.jsxs)(et.TN,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"HardenAPIModal.tsx",children:["The ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema will not be accessible via the API once its not exposed. You should be using the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"api"})," schema instead."]})]}),(0,s.jsxs)("p",{children:["Click the button below to remove the"," ",(0,s.jsx)("code",{className:"text-xs text-foreground",children:"public"})," schema from both Exposed schemas and Extra search path in your API configuration."]}),(0,s.jsx)(W.G,{type:"primary",className:"w-min",disabled:!x,loading:f,tooltip:{content:{side:"right",text:x?void 0:"Public schema no longer exposed"}},onClick:()=>{if(void 0===n)return console.error("Project is required");if(void 0===i)return console.error("Postgrest config is required");let e=i.db_extra_search_path.split(",").map(e=>e.trim()).filter(e=>"public"!==e).join(", "),t=i.db_schema.split(",").map(e=>e.trim()).filter(e=>"public"!==e).join(", ");p({projectRef:n.ref,maxRows:i.max_rows,dbPool:i.db_pool,dbSchema:t,dbExtraSearchPath:e})},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"HardenAPIModal.tsx",children:"Remove public schema from exposed schemas"})]})})]})]})})},eD=eh.z.object({dbSchema:eh.z.array(eh.z.string()),dbExtraSearchPath:eh.z.string(),maxRows:eh.z.number().max(1e6,"Can't be more than 1,000,000"),dbPool:eh.z.number().min(0,"Must be more than 0").max(1e3,"Can't be more than 1000").optional().nullable(),enableDataApi:eh.z.boolean()}).refine(e=>!e.enableDataApi||0!==e.dbSchema.length,{message:"Must have at least one schema if Data API is enabled",path:["dbSchema"]}),eW=()=>{var e,t;let{ref:a}=(0,d.g)(),{project:r}=(0,c.Om)(),[n,l]=(0,i.useState)(!1),{data:u,isError:x}=(0,K.y)({projectRef:a}),{data:m}=(0,ey.z)({projectRef:null==r?void 0:r.ref,connectionString:null==r?void 0:r.connectionString}),{data:h,isLoading:p}=(0,eb.w$)({projectRef:null==r?void 0:r.ref,connectionString:null==r?void 0:r.connectionString}),{mutate:f,isLoading:g}=(0,eg.c)({onSuccess:()=>{o.oR.success("Successfully saved settings")}}),y="project-postgres-config",b=["auth","pgbouncer","hooks","extensions"],j=(0,O.SE)(A.aG.UPDATE,"custom_config_postgrest"),v=(null==(e=(null!=m?m:[]).find(e=>"pg_graphql"===e.name))?void 0:e.installed_version)!==null,w=(null==u?void 0:u.db_schema)?null==u?void 0:u.db_schema.replace(/ /g,"").split(","):[],N={dbSchema:w,maxRows:null==u?void 0:u.max_rows,dbExtraSearchPath:null==u?void 0:u.db_extra_search_path,dbPool:null==u?void 0:u.db_pool},S=(0,em.mN)({resolver:(0,ei.u)(eD),mode:"onChange",defaultValues:N}),k=null!=(t=null==h?void 0:h.filter(e=>{if(0>ed()(b,e.name))return e}).map(e=>({id:e.id,value:e.name,name:e.name,disabled:!1})))?t:[];function P(){let e=null!=u&&!!u.db_schema;S.reset({...N,enableDataApi:e})}let C=async e=>{if(!a)return console.error("Project ref is required");f({projectRef:a,dbSchema:e.dbSchema.join(", "),maxRows:e.maxRows,dbExtraSearchPath:e.dbExtraSearchPath,dbPool:e.dbPool?e.dbPool:null})};(0,i.useEffect)(()=>{u&&P()},[u]);let I=S.getValues("enableDataApi");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ej.lV,{...S,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"PostgrestConfig.tsx",children:(0,s.jsx)("form",{id:y,onSubmit:S.handleSubmit(C),children:(0,s.jsxs)(ef.ge,{"data-sentry-element":"FormPanelContainer","data-sentry-source-file":"PostgrestConfig.tsx",children:[(0,s.jsxs)(ef.gI,{className:"flex items-center justify-between","data-sentry-element":"FormPanelHeader","data-sentry-source-file":"PostgrestConfig.tsx",children:[(0,s.jsx)("span",{children:"Data API Settings"}),(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)(ep.A,{href:"https://supabase.com/docs/guides/database/connecting-to-postgres#data-apis","data-sentry-element":"DocsButton","data-sentry-source-file":"PostgrestConfig.tsx"}),(0,s.jsx)(Y.$,{type:"default",icon:(0,s.jsx)(ec.A,{}),onClick:()=>l(!0),"data-sentry-element":"Button","data-sentry-source-file":"PostgrestConfig.tsx",children:"Harden Data API"})]})]}),(0,s.jsxs)(ef.YX,{"data-sentry-element":"FormPanelContent","data-sentry-source-file":"PostgrestConfig.tsx",children:[x?(0,s.jsx)(es.Z,{type:"destructive",title:"Failed to retrieve API settings"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ej.zB,{control:S.control,name:"enableDataApi",render:e=>{let{field:t}=e;return(0,s.jsxs)(ej.eI,{className:"w-full",children:[(0,s.jsx)(ek.M,{className:"w-full px-8 py-8",layout:"flex",label:"Enable Data API",description:"When enabled you will be able to use any Supabase client library and PostgREST endpoints with any schema configured below.",children:(0,s.jsx)(ej.MJ,{children:(0,s.jsx)(ev.d,{size:"large",disabled:!j,checked:t.value,onCheckedChange:e=>{t.onChange(e),e?(S.setValue("enableDataApi",!0),S.setValue("dbSchema",w)):(S.setValue("enableDataApi",!1),S.setValue("dbSchema",[]))}})})}),!t.value&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ew.w,{}),(0,s.jsxs)(et.Fc,{variant:"warning",className:"mb-0 border-none rounded-none",children:[(0,s.jsx)(ea.id,{className:"!left-[2rem]"}),(0,s.jsx)(et.XL,{className:"!pl-[3.5rem] !left-[6rem]",children:"No schemas can be queried"}),(0,s.jsxs)(et.TN,{className:"!pl-[3.5rem]",children:[(0,s.jsx)("p",{children:"With this setting disabled, you will not be able to query any schemas via the Data API."}),(0,s.jsxs)("p",{children:["You will see errors from the Postgrest endpoint",(0,s.jsx)("code",{className:"text-xs",children:"/rest/v1/"}),"."]})]})]})]})]})}}),(0,s.jsx)(eN.Nt,{open:S.getValues("enableDataApi"),children:(0,s.jsxs)(eN.Ke,{className:"border-t divide-y transition-all data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down",children:[(0,s.jsx)(ej.zB,{control:S.control,name:"dbSchema",render:e=>{let{field:t}=e;return(0,s.jsx)(ej.eI,{className:"w-full",children:(0,s.jsxs)(ek.M,{label:"Exposed schemas",description:"The schemas to expose in your API. Tables, views and stored procedures in these schemas will get API endpoints.",layout:"horizontal",className:"px-8 py-8",children:[p?(0,s.jsx)("div",{className:"col-span-12 flex flex-col gap-2 lg:col-span-7",children:(0,s.jsx)(eS.E,{className:"w-full h-[38px]"})}):(0,s.jsxs)(eP.xf,{onValuesChange:t.onChange,values:t.value,size:"small",disabled:!j||!I,children:[(0,s.jsx)(eP.hw,{mode:"inline-combobox",label:"Select schemas for Data API...",badgeLimit:"wrap",showIcon:!1,deletableBadge:!0}),(0,s.jsx)(eP.sD,{children:(0,s.jsx)(eP.DG,{children:k.length<=0?(0,s.jsx)(eP.Oe,{value:"no",children:"no"},"empty"):(0,s.jsx)(s.Fragment,{children:k.map(e=>(0,s.jsx)(eP.Oe,{value:e.name,children:e.name},e.id+"-"+e.name))})})})]}),!t.value.includes("public")&&t.value.length>0&&(0,s.jsx)(es.Z,{type:"default",title:"The public schema for this project is not exposed",className:"mt-2",description:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["You will not be able to query tables and views in the"," ",(0,s.jsx)("code",{children:"public"})," schema via supabase-js or HTTP clients."]}),v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Tables in the ",(0,s.jsx)("code",{className:"text-xs",children:"public"})," ","schema are still exposed over our GraphQL endpoints."]}),(0,s.jsx)(Y.$,{asChild:!0,type:"default",children:(0,s.jsx)(ex(),{href:"/project/".concat(a,"/database/extensions"),children:"Disable the pg_graphql extension"})})]})]})})]})})}}),(0,s.jsx)(ej.zB,{control:S.control,name:"dbExtraSearchPath",render:e=>{let{field:t}=e;return(0,s.jsx)(ej.eI,{className:"w-full",children:(0,s.jsx)(ek.M,{className:"w-full px-8 py-8",layout:"horizontal",label:"Extra search path",description:"Extra schemas to add to the search path of every request. Multiple schemas must be comma-separated.",children:(0,s.jsx)(ej.MJ,{children:(0,s.jsx)(eA.p,{size:"small",disabled:!j||!I,...t})})})})}}),(0,s.jsx)(ej.zB,{control:S.control,name:"maxRows",render:e=>{let{field:t}=e;return(0,s.jsx)(ej.eI,{className:"w-full",children:(0,s.jsx)(ek.M,{className:"w-full px-8 py-8",layout:"horizontal",label:"Max rows",description:"The maximum number of rows returned from a view, table, or stored procedure. Limits payload size for accidental or malicious requests.",children:(0,s.jsx)(ej.MJ,{children:(0,s.jsx)(eA.p,{size:"small",disabled:!j||!I,...t,type:"number",...S.register("maxRows",{valueAsNumber:!0})})})})})}}),(0,s.jsx)(ej.zB,{control:S.control,name:"dbPool",render:e=>{let{field:t}=e;return(0,s.jsx)(ej.eI,{className:"w-full",children:(0,s.jsx)(ek.M,{className:"w-full px-8 py-8",layout:"horizontal",label:"Pool size",description:"Number of maximum connections to keep open in the Data API server's database pool. Unset to let it be configured automatically based on compute size.",children:(0,s.jsx)(ej.MJ,{children:(0,s.jsx)(eA.p,{size:"small",disabled:!j||!I,...t,type:"number",placeholder:"Configured automatically based on compute size",onChange:e=>t.onChange(""===e.target.value?null:Number(e.target.value)),value:null===t.value?"":t.value})})})})}})]})})]}),(0,s.jsx)(ef._4,{className:"flex px-8 py-4","data-sentry-element":"FormPanelFooter","data-sentry-source-file":"PostgrestConfig.tsx",children:(0,s.jsx)(J.I,{form:y,isSubmitting:g,hasChanges:S.formState.isDirty,handleReset:P,disabled:!j,helper:j?void 0:"You need additional permissions to update your project's API settings","data-sentry-element":"FormActions","data-sentry-source-file":"PostgrestConfig.tsx"})})]})]})})}),(0,s.jsx)(eL,{visible:n,onClose:()=>l(!1),"data-sentry-element":"HardenAPIModal","data-sentry-source-file":"PostgrestConfig.tsx"})]})};var eJ=a(191),eH=a(39071),eU=a(68001);let eV=()=>{let{ref:e}=(0,d.g)(),t=[{title:"Project Settings",items:[{name:"General",key:"general",url:"#"},{name:"Compute and Disk",key:"compute-and-disk",url:"#"},{name:"Infrastructure",key:"infrastructure",url:"#"},{name:"Integrations",key:"integrations",url:"#"},{name:"API Keys",key:"api-keys",url:"#",label:"NEW"},{name:"Add Ons",key:"addons",url:"#"},{name:"Vault",key:"vault",url:"#",label:"Alpha",rightIcon:(0,s.jsx)(eJ.A,{strokeWidth:1,className:"h-4 w-4"})}]},{title:"Configuration",items:[{name:"Database",key:"database",url:"#"}]}];return(0,s.jsxs)("div",{className:"pb-36 pt-10 relative w-full flex flex-col xl:flex-row border xl:py-10 px-10 rounded-md overflow-hidden","data-sentry-component":"ApiKeysMoved","data-sentry-source-file":"ApiKeysMoved.tsx",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-0 z-[2]",children:[(0,s.jsx)("p",{className:"text-sm text-foreground",children:"API keys have moved"}),(0,s.jsx)("p",{className:"text-sm text-foreground-lighter mb-4",children:"They can now be found in the new API Keys page"}),(0,s.jsx)(ex(),{href:"/project/".concat(e,"/settings/api-keys"),"data-sentry-element":"Link","data-sentry-source-file":"ApiKeysMoved.tsx",children:(0,s.jsx)(Y.$,{type:"default","data-sentry-element":"Button","data-sentry-source-file":"ApiKeysMoved.tsx",children:"Go to API Keys"})})]}),(0,s.jsxs)("div",{className:"absolute right-20 -top-[80px] w-fit scale-80 origin-top-right",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 bottom-0 left-0 bg-gradient-to-r from-transparent to-background-200/75 z-10"}),(0,s.jsxs)("div",{className:"bg-studio-sidebar border rounded-md overflow-hidden shadow-sm opacity-75 flex flex-row w-[280px]",children:[(0,s.jsx)("div",{className:"opacity-50",children:(0,s.jsx)(eU.Bx,{"data-sentry-element":"Sidebar","data-sentry-source-file":"ApiKeysMoved.tsx"})}),(0,s.jsx)(eH.l,{page:"api-keys",menu:t,"data-sentry-element":"ProductMenu","data-sentry-source-file":"ApiKeysMoved.tsx"})]})]})]})},eB=()=>{var e,t;let a=(0,n.jE)(),{project:S,isLoading:A}=(0,c.Om)(),{ref:k,source:P}=(0,d.g)(),C=(0,j.RE)(),{data:I}=(0,f.A)({projectRef:k}),{data:_,isError:T}=(0,y.Vh)({projectRef:k}),{data:E}=(0,g.z)({projectRef:k}),{data:R}=(0,h.l)({projectRef:k}),M=null==R?void 0:R.jwtSecretUpdateStatus,z=null==R?void 0:R.jwtSecretUpdateError,F=(0,i.useRef)(),{Failed:L,Updated:D,Updating:W}=r.bh,J=N[z],H=(null==I||null==(e=I.customDomain)?void 0:e.status)==="active",U=null==_?void 0:_.find(e=>e.identifier===C.selectedDatabaseId),V="load-balancer"===C.selectedDatabaseId,B=(null==U?void 0:U.identifier)!==k,q=H&&C.selectedDatabaseId===k?"https://".concat(I.customDomain.hostname):V?null!=(t=null==E?void 0:E[0].endpoint)?t:"":null==U?void 0:U.restUrl;return(0,i.useEffect)(()=>{if(F.current===W)switch(M){case D:a.invalidateQueries(p.n.api(k)),a.invalidateQueries(p.n.settings(k)),a.invalidateQueries(p.n.postgrest(k)),o.oR.success("Successfully updated JWT secret");break;case L:o.oR.error("JWT secret update failed: ".concat(J))}F.current=M},[M]),(0,i.useEffect)(()=>{void 0!==P&&C.setSelectedDatabaseId("load-balancer")},[P]),(0,s.jsx)("div",{"data-sentry-component":"ServiceList","data-sentry-source-file":"ServiceList.tsx",children:A?(0,s.jsx)(m.y,{}):(null==S?void 0:S.status)!==b.BU.ACTIVE_HEALTHY?(0,s.jsxs)("div",{className:"flex items-center justify-center rounded border border-overlay bg-surface-100 p-8",children:[(0,s.jsx)(l.A,{size:16}),(0,s.jsx)("p",{className:"text-sm text-foreground-light ml-2",children:"API settings are unavailable as the project is not active"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("section",{children:(0,s.jsx)(x.A,{title:(0,s.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,s.jsx)("h5",{className:"mb-0",children:"Project URL"}),(0,s.jsx)(u.A,{additionalOptions:(null!=E?E:[]).length>0?[{id:"load-balancer",name:"API Load Balancer"}]:[]})]}),children:(0,s.jsx)(x.A.Content,{children:T?(0,s.jsxs)("div",{className:"flex items-center justify-center py-4 space-x-2",children:[(0,s.jsx)(l.A,{size:16}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Failed to retrieve project URL"})]}):(0,s.jsx)(v.A,{copy:!0,label:H?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("p",{children:"URL"}),(0,s.jsx)(w.E,{children:"Custom domain active"})]}):"URL",readOnly:!0,disabled:!0,className:"input-mono",value:q,descriptionText:V?"RESTful endpoint for querying and managing your databases through your load balancer":B?"RESTful endpoint for querying your read replica":"RESTful endpoint for querying and managing your database",layout:"horizontal"})})})}),(0,s.jsx)("section",{className:"mb-8",children:(0,s.jsx)(eV,{})}),(0,s.jsx)("section",{id:"jwt-settings",children:(0,s.jsx)(el,{})}),(0,s.jsx)("section",{id:"postgrest-config",children:(0,s.jsx)(eW,{})})]})})};var eq=a(1053),eG=a(49428),eK=a(40402);let eO=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eK.eh,{id:"billing-page-top","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"api.tsx",children:(0,s.jsx)(eK.Uw,{"data-sentry-element":"ScaffoldHeader","data-sentry-source-file":"api.tsx",children:(0,s.jsx)(eK.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"api.tsx",children:"API Settings"})})}),(0,s.jsx)(eK.eh,{bottomPadding:!0,"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"api.tsx",children:(0,s.jsx)(eB,{"data-sentry-element":"ServiceList","data-sentry-source-file":"api.tsx"})})]});eO.getLayout=e=>(0,s.jsx)(eq.A,{children:(0,s.jsx)(eG.A,{title:"API Settings",children:e})});let eX=eO},49428:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var s=a(80263),r=a(47504),n=a(53239),l=a(19898),i=a(39071),o=a(38944),d=a(34969),c=a(68875),u=a(80207),x=a(64036),m=a(72602),h=a(32210);let p=(0,u.r)(e=>{let{title:t,children:a}=e,u=(0,r.useRouter)(),{ref:p}=(0,l.g)(),f=(0,c.KT)(),g=(0,d.a)();(0,n.useEffect)(()=>{x.pe||u.push("/project/default")},[u]);let y=u.pathname.includes("billing")?u.pathname.split("/")[5]:u.pathname.split("/")[4],{projectAuthAll:b,projectEdgeFunctionAll:j,projectStorageAll:v,billingInvoices:w}=(0,o.x)(["project_auth:all","project_edge_function:all","project_storage:all","billing:invoices"]),N=(0,h.M)(p,f,g,{auth:b,edgeFunctions:j,storage:v,invoices:w});return(0,s.jsx)(m.A,{isBlocking:!1,title:t||"Settings",product:"Settings",productMenu:(0,s.jsx)(i.l,{page:y,menu:N}),"data-sentry-element":"ProjectLayout","data-sentry-component":"SettingsLayout","data-sentry-source-file":"SettingsLayout.tsx",children:a})})},66586:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(80263),r=a(53239),n=a(64938),l=a(3891);function i(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function o(e){let{validate:t,...a}=e,[o,d]=(0,r.useReducer)(i,null),c=(0,n.Wx)({validateOnBlur:!0,...a,validationSchema:a.validationSchema,initialValues:a.initialValues,onSubmit:a.onSubmit,validate:t||function(){return o}});return(0,s.jsx)("form",{id:a.id,name:a.name,onSubmit:c.handleSubmit,className:a.className,style:a.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,s.jsx)(l.h,{values:c.values,errors:c.errors,formContextOnChange:c.handleChange,handleBlur:c.handleBlur,touched:c.touched,fieldLevelValidation:function(e,t){d({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:a.children({errors:c.errors,touched:c.touched,isSubmitting:c.isSubmitting,isValidating:c.isValidating,submitCount:c.submitCount,initialValues:c.initialValues,values:c.values,handleReset:c.handleReset,resetForm:c.resetForm,setFieldValue:c.setFieldValue})})})}},72256:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var s=a(80263),r=a(41226),n=a(52700),l=a(77877),i=a(59153),o=a.n(i),d=a(53239),c=a(71126);let u=(0,d.forwardRef)((e,t)=>{let{icon:a,title:i,description:u,url:x,urlLabel:m="Read more",defaultVisibility:h=!1,hideCollapse:p=!1,button:f,className:g="",block:y=!1}=e,[b,j]=(0,d.useState)(h);return(0,s.jsx)("div",{ref:t,role:"alert",className:"".concat(y?"block w-full":"","\n      block w-full rounded-md border bg-surface-300/25 py-3 ").concat(g),children:(0,s.jsxs)("div",{className:"flex flex-col px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[a&&(0,s.jsx)("span",{className:"text-foreground-lighter",children:a}),(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)("h5",{className:"text-sm text-foreground",children:i})})]}),u&&!p?(0,s.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>j(!b),children:b?(0,s.jsx)(r.A,{size:14,strokeWidth:1.5}):(0,s.jsx)(n.A,{size:14,strokeWidth:1.5})}):null]}),(u||x||f)&&(0,s.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(b?"mt-3":""),style:{maxHeight:500*!!b},children:[(0,s.jsx)("div",{className:"text-foreground-light text-sm",children:u}),x&&(0,s.jsx)("div",{children:(0,s.jsx)(c.$,{asChild:!0,type:"default",icon:(0,s.jsx)(l.A,{}),children:(0,s.jsx)(o(),{href:x,target:"_blank",rel:"noreferrer",children:m})})}),f&&(0,s.jsx)("div",{children:f})]})]})})});u.displayName="InformationBox";let x=u},76043:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/api",function(){return a(45283)}])},81766:(e,t,a)=>{"use strict";a.d(t,{c:()=>d});var s=a(32144),r=a(80251),n=a(73969),l=a(40807),i=a(20010);async function o(e){let{projectRef:t,dbSchema:a,maxRows:s,dbExtraSearchPath:r,dbPool:n}=e,i={db_schema:a,max_rows:s,db_extra_search_path:r};n&&(i.db_pool=n);let{data:o,error:d}=await (0,l.F6)("/platform/projects/{ref}/config/postgrest",{params:{path:{ref:t}},body:i});return d&&(0,l.H4)(d),o}let d=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,s.jE)();return(0,r.n)(e=>o(e),{async onSuccess(t,a,s){let{projectRef:r}=a;l.invalidateQueries(i.n.postgrest(r)),await (null==e?void 0:e(t,a,s))},async onError(e,a,s){void 0===t?n.oR.error("Failed to update Postgrest config: ".concat(e.message)):t(e,a,s)},...a})}},88439:(e,t,a)=>{"use strict";a.d(t,{U:()=>d});var s=a(32144),r=a(80251),n=a(73969),l=a(40807),i=a(69830);async function o(e){let{projectRef:t,config:a}=e,{data:s,error:r}=await (0,l.F6)("/platform/auth/{ref}/config",{params:{path:{ref:t}},body:{...a}});return r&&(0,l.H4)(r),s}let d=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,s.jE)();return(0,r.n)(e=>o(e),{async onSuccess(t,a,s){let{projectRef:r}=a;await l.invalidateQueries(i.Z.authConfig(r)),await (null==e?void 0:e(t,a,s))},async onError(e,a,s){void 0===t?n.oR.error("Failed to update auth configuration: ".concat(e.message)):t(e,a,s)},...a})}},89771:(e,t,a)=>{"use strict";a.d(t,{z:()=>d});var s=a(56947),r=a(40807),n=a(73516),l=a(68875),i=a(64036);async function o(e,t){let{projectRef:a,connectionString:s}=e;if(!a)throw Error("projectRef is required");let n=new Headers;s&&n.set("x-connection-encrypted",s);let{data:l,error:i}=await (0,r.Jt)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":s},path:{ref:a}},headers:n,signal:t});return i&&(0,r.H4)(i),l}let d=function(e){let{projectRef:t,connectionString:a}=e,{enabled:r=!0,...d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(0,l.KT)(),u=(null==c?void 0:c.status)===i.BU.ACTIVE_HEALTHY;return(0,s.I)(n.I.list(t),e=>{let{signal:s}=e;return o({projectRef:t,connectionString:a},s)},{enabled:r&&void 0!==t&&u,...d})}},91378:(e,t,a)=>{"use strict";a.d(t,{d:()=>c});var s=a(80263),r=a(44893),n=a(79279),l=a(53239),i=a(51859);let o=(0,n.F)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),d=(0,n.F)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),c=l.forwardRef((e,t)=>{let{className:a,size:n,...l}=e;return(0,s.jsx)(r.bL,{className:(0,i.cn)(o({size:n}),a),...l,ref:t,children:(0,s.jsx)(r.zi,{className:(0,i.cn)(d({size:n}))})})});c.displayName=r.bL.displayName},95268:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var s=a(80263),r=a(71126);let n=e=>{let{form:t,hasChanges:a,handleReset:n,helper:l,disabled:i=!1,isSubmitting:o,submitText:d="Save"}=e,c=o||i||!a&&void 0!==a;return(0,s.jsxs)("div",{className:["flex w-full items-center gap-2",l?"justify-between":"justify-end"].join(" "),"data-sentry-component":"FormActions","data-sentry-source-file":"FormActions.tsx",children:[l&&(0,s.jsx)("span",{className:"text-sm text-foreground-lighter",children:l}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.$,{disabled:c,type:"default",htmlType:"reset",onClick:()=>n(),"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:"Cancel"}),(0,s.jsx)(r.$,{form:t,type:"primary",htmlType:"submit",disabled:c,loading:o,"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:d})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[89,2147,726,4669,9353,7176,3730,9844,6110,9955,6871,8153,5297,5661,4100,8870,2981,4181,2187,4560,7344,3895,1959,9116,9869,4938,6692,7872,5874,49,2174,971,6642,8434,2602,6593,636,8792],()=>t(76043)),_N_E=e.O()}]);